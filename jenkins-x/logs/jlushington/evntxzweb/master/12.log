Step: build-step-credential-initializer:

{"level":"warn","ts":1555214929.962066,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1555214929.962723,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-git-source-0:

{"level":"warn","ts":1555214932.2941244,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1555214932.9551609,"logger":"fallback-logger","caller":"git-init/main.go:92","msg":"Successfully cloned \"https://github.com/jlushington/evntxzweb.git\" @ \"565148f6c2c9f6c729c8b2d0ca7b4cdd58e43eb9\" in path \"/workspace\""}
Step: build-step-jenkins:

Picked up _JAVA_OPTIONS: -Xmx400m
  31.063 [id=22]	WARNING	c.c.j.p.k.KubernetesCredentialProvider#convertSecret: Failed to convert Secret 'kaniko-secret' of type secretText due to secretText credential is missing the text
Started
Running in Durability level: PERFORMANCE_OPTIMIZED
  41.361 [id=28]	WARNING	i.f.k.c.i.VersionUsageUtils#alert: The client is using resource type 'customresourcedefinitions' with unstable version 'v1beta1'
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
[Pipeline] }
[Pipeline] // stage
[Pipeline] withCredentials
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (CI Build and push snapshot)
Stage "CI Build and push snapshot" skipped due to when conditional
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Release)
[Pipeline] git
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/jlushington/evntxzweb.git # timeout=10
Fetching upstream changes from https://github.com/jlushington/evntxzweb.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/jlushington/evntxzweb.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 565148f6c2c9f6c729c8b2d0ca7b4cdd58e43eb9 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 565148f6c2c9f6c729c8b2d0ca7b4cdd58e43eb9
 > git branch -a -v --no-abbrev # timeout=10
 > git branch -D master # timeout=10
 > git checkout -b master 565148f6c2c9f6c729c8b2d0ca7b4cdd58e43eb9
Commit message: "Cart Flow Update"
First time build. Skipping changelog.
[Pipeline] sh
+ jx-release-version
+ echo 0.0.12
[Pipeline] sh
+ cat VERSION
+ jx step tag --version 0.0.12
Tag v0.0.12 created and pushed to remote origin
[Pipeline] sh
+ npm install
npm WARN notice [SECURITY] webpack-dev-server has the following vulnerability: 1 high. Go here for more details: https://nodesecurity.io/advisories?search=webpack-dev-server&version=2.9.4 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.

> uglifyjs-webpack-plugin@0.4.6 postinstall /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job/node_modules/uglifyjs-webpack-plugin
> node lib/post_install.js

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 1447 packages in 52.029s
[Pipeline] sh
+ CI=true DISPLAY=:99 npm test

> evntxz-web@0.1.0 test /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job
> react-scripts test --env=jsdom

 PASS  src/components/App.test.js (7.544s)
  âœ“ renders without crashing (153ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        8.406s
Ran all test suites.
  console.error node_modules/react-dom/cjs/react-dom.development.js:506
    Warning: Invalid DOM property `class`. Did you mean `className`?
        in div (at Banner.js:19)
        in div (at Banner.js:18)
        in div (at Banner.js:8)
        in Banner (at Home.js:13)
        in div (at Home.js:12)
        in Header (created by Context.Consumer)
        in Route (at App.js:30)
        in div (at App.js:27)
        in Router (created by BrowserRouter)
        in BrowserRouter (at App.js:26)
        in App (at App.test.js:7)

[Pipeline] sh
+ cat VERSION
+ export VERSION=0.0.12
+ skaffold build -f skaffold.yaml
time="2019-04-14T04:12:29Z" level=warning msg="config version (skaffold/v1beta2) out of date: upgrading to latest (skaffold/v1beta6)"
Generating Tag for [changeme]...
Starting build...
Building [changeme]...
Sending build context to Docker daemon  538.6kBSending build context to Docker daemon  1.589MBSending build context to Docker daemon  3.195MBSending build context to Docker daemon  4.245MBSending build context to Docker daemon   5.84MBSending build context to Docker daemon  6.364MBSending build context to Docker daemon  7.418MBSending build context to Docker daemon  9.537MBSending build context to Docker daemon  12.79MBSending build context to Docker daemon  20.02MBSending build context to Docker daemon  25.02MBSending build context to Docker daemon  28.88MBSending build context to Docker daemon  34.38MBSending build context to Docker daemon  44.92MBSending build context to Docker daemon  51.01MBSending build context to Docker daemon  51.53MBSending build context to Docker daemon  52.58MBSending build context to Docker daemon  53.64MBSending build context to Docker daemon  54.69MBSending build context to Docker daemon  55.74MBSending build context to Docker daemon  56.81MBSending build context to Docker daemon  57.87MBSending build context to Docker daemon  58.95MBSending build context to Docker daemon  60.54MBSending build context to Docker daemon  62.13MBSending build context to Docker daemon  63.19MBSending build context to Docker daemon  65.33MBSending build context to Docker daemon  69.14MBSending build context to Docker daemon  70.72MBSending build context to Docker daemon  73.98MBSending build context to Docker daemon  76.09MBSending build context to Docker daemon  80.49MBSending build context to Docker daemon  81.54MBSending build context to Docker daemon  82.59MBSending build context to Docker daemon  84.17MBSending build context to Docker daemon  85.22MBSending build context to Docker daemon  86.28MBSending build context to Docker daemon  88.41MBSending build context to Docker daemon  88.93MBSending build context to Docker daemon  89.46MBSending build context to Docker daemon  89.98MBSending build context to Docker daemon  92.12MBSending build context to Docker daemon  94.82MBSending build context to Docker daemon  95.91MBSending build context to Docker daemon  98.09MBSending build context to Docker daemon  99.14MBSending build context to Docker daemon  100.7MBSending build context to Docker daemon  101.8MBSending build context to Docker daemon  102.9MBSending build context to Docker daemon  103.9MBSending build context to Docker daemon  105.6MBSending build context to Docker daemon  106.6MBSending build context to Docker daemon  107.2MBSending build context to Docker daemon  108.2MBSending build context to Docker daemon  109.8MBSending build context to Docker daemon  110.9MBSending build context to Docker daemon    113MBSending build context to Docker daemon  114.6MBSending build context to Docker daemon  115.1MBSending build context to Docker daemon  115.7MBSending build context to Docker daemon  116.7MBSending build context to Docker daemon  118.9MBSending build context to Docker daemon  121.6MBSending build context to Docker daemon  122.6MBSending build context to Docker daemon  124.8MBSending build context to Docker daemon  125.3MBSending build context to Docker daemon    127MBSending build context to Docker daemon    128MBSending build context to Docker daemon  130.2MBSending build context to Docker daemon  130.7MBSending build context to Docker daemon  131.8MBSending build context to Docker daemon  133.4MBSending build context to Docker daemon  133.9MBSending build context to Docker daemon  134.4MBSending build context to Docker daemon  135.5MBSending build context to Docker daemon  136.6MBSending build context to Docker daemon  139.3MBSending build context to Docker daemon  140.8MBSending build context to Docker daemon    143MBSending build context to Docker daemon  145.1MBSending build context to Docker daemon  146.7MBSending build context to Docker daemon  148.8MBSending build context to Docker daemon    151MBSending build context to Docker daemon  153.7MBSending build context to Docker daemon    158MBSending build co
ntext to Docker daemon  159.6MBSending build context to Docker daemon  162.3MBSending build context to Docker daemon  164.4MBSending build context to Docker daemon  167.1MBSending build context to Docker daemon  168.7MBSending build context to Docker daemon  172.5MBSending build context to Docker daemon  174.6MBSending build context to Docker daemon  177.3MBSending build context to Docker daemon  179.5MBSending build context to Docker daemon  182.2MBSending build context to Docker daemon  184.9MBSending build context to Docker daemon  189.3MBSending build context to Docker daemon  193.1MBSending build context to Docker daemon    197MBSending build context to Docker daemon  198.1MBSending build context to Docker daemon  200.7MBSending build context to Docker daemon  202.9MBSending build context to Docker daemon  206.1MBSending build context to Docker daemon  209.8MBSending build context to Docker daemon  211.4MBSending build context to Docker daemon  213.7MBSending build context to Docker daemon  216.9MBSending build context to Docker daemon    218MBSending build context to Docker daemon  218.5MBSending build context to Docker daemon  219.1MBSending build context to Docker daemon  220.2MBSending build context to Docker daemon  223.9MBSending build context to Docker daemon  224.9MBSending build context to Docker daemon    226MBSending build context to Docker daemon  227.1MBSending build context to Docker daemon  227.6MBSending build context to Docker daemon  230.3MBSending build context to Docker daemon    234MBSending build context to Docker daemon  235.1MBSending build context to Docker daemon  236.1MBSending build context to Docker daemon  236.7MBSending build context to Docker daemon  239.3MBSending build context to Docker daemon  240.9MBSending build context to Docker daemon  242.5MBSending build context to Docker daemon    243MBSending build context to Docker daemon  243.6MBSending build context to Docker daemon  244.7MBSending build context to Docker daemon  245.2MBSending build context to Docker daemon  245.7MBSending build context to Docker daemon  247.3MBSending build context to Docker daemon  247.8MBSending build context to Docker daemon  248.9MBSending build context to Docker daemon    249MB
Step 1/6 : FROM node:9-slim
9-slim: Pulling from library/node
Digest: sha256:288b29c1925d65b2d7d8701f8ada201e7dcd066438c0fb4299c35dff129b893f
Status: Image is up to date for node:9-slim
 ---> e20bb4abe4ee
Step 2/6 : ENV PORT 8080
 ---> Running in f03e4a12a2af
 ---> f708c7893c5c
Step 3/6 : EXPOSE 8080
 ---> Running in 4d48f773a77c
 ---> dea85d66468b
Step 4/6 : WORKDIR /usr/src/app
 ---> a1aaaea3a7b2
Step 5/6 : COPY . .
 ---> 1b161be73a89
Step 6/6 : CMD npm start
 ---> Running in f9e164308e87
 ---> 817714ccc356
Successfully built 817714ccc356
The push refers to a repository [10.39.253.125:5000/jlushington/evntxzweb]
6007df756087: Preparing
a797df611f54: Preparing
e16c226cf2a8: Preparing
7fd597d009e4: Preparing
7c6ab5fb7059: Preparing
ed271eac23e9: Preparing
156ff16f37e4: Preparing
ed271eac23e9: Waiting
156ff16f37e4: Waiting
e16c226cf2a8: Layer already exists
7c6ab5fb7059: Layer already exists
7fd597d009e4: Layer already exists
ed271eac23e9: Layer already exists
156ff16f37e4: Layer already exists
a797df611f54: Pushed
6007df756087: Pushed
0.0.12: digest: sha256:cb6d66da291789703881345dba724c71dff47abc550d3ec03f9b162c249f2398 size: 1789
Build complete in 1m34.747129567s
Starting test...
Test complete in 8.081Âµs
changeme -> 10.39.253.125:5000/jlushington/evntxzweb:0.0.12@sha256:cb6d66da291789703881345dba724c71dff47abc550d3ec03f9b162c249f2398
There is a new version (0.27.0) of Skaffold available. Download it at https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64

[Pipeline] sh
+ cat VERSION
+ jx step post build --image 10.39.253.125:5000/jlushington/evntxzweb:0.0.12
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Promote to Environments)
[Pipeline] dir
Running in /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job/charts/evntxzweb
[Pipeline] {
[Pipeline] sh
+ cat ../../VERSION
+ jx step changelog --batch-mode --version v0.0.12
Converted /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job/charts/evntxzweb to an unshallow repository
Generating change log from git ref 565148f6c2c9f6c729c8b2d0ca7b4cdd58e43eb9 => 331b8d2e7a94a95b7bca4918450ad49454bf5141
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Finding issues in commit messages using git format
No release found for jlushington/evntxzweb and tag v0.0.12 so creating a new release
Updated the release information at https://github.com/jlushington/evntxzweb/releases/tag/v0.0.12
generated: /tmp/jenkinsTests.tmp/jenkins6919056284066841001test/workspace/job/charts/evntxzweb/templates/release.yaml
Created Release evntxzweb-0-0-12 resource in namespace jx
Updating PipelineActivity jlushington-evntxzweb-master-12 with version 0.0.12
Updated PipelineActivities jlushington-evntxzweb-master-12 with release notes URL: https://github.com/jlushington/evntxzweb/releases/tag/v0.0.12
[Pipeline] sh
+ jx step helm release
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: jenkins-x http://chartmuseum.jenkins-x.io
Successfully added Helm repository jenkins-x.
Adding missing Helm repo: releases http://jenkins-x-chartmuseum:8080
Successfully added Helm repository releases.
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Uploading chart file evntxzweb-0.0.12.tgz to http://jenkins-x-chartmuseum:8080/api/charts
Received 201 response: {"saved":true}
[Pipeline] sh
+ cat ../../VERSION
+ jx promote -b --all-auto --timeout 1h --version 0.0.12
prow based install so skip waiting for the merge of Pull Requests to go green as currently there is an issue with gettingstatuses from the PR, see https://github.com/jenkins-x/jx/issues/2410
Promoting app evntxzweb version 0.0.12 to namespace jx-staging
Created Pull Request: https://github.com/jlushington/environment-evntxz-staging/pull/36

Pull Request https://github.com/jlushington/environment-evntxz-staging/pull/36 is merged at sha a0d529e5cd33c78fec14660d9244f17b84a150b1
Pull Request merged but we are not waiting for the update pipeline to complete!
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
