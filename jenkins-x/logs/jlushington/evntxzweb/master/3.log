Step: build-step-credential-initializer:

{"level":"warn","ts":1553913496.8033133,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1553913496.8044612,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-git-source-0:

{"level":"warn","ts":1553913497.9346108,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1553913498.2450364,"logger":"fallback-logger","caller":"git-init/main.go:92","msg":"Successfully cloned \"https://github.com/jlushington/evntxzweb.git\" @ \"2eb3e602a0f34c9394cd50eda3e7fb198192cb49\" in path \"/workspace\""}
Step: build-step-jenkins:

Picked up _JAVA_OPTIONS: -Xmx400m
  14.017 [id=23]	WARNING	c.c.j.p.k.KubernetesCredentialProvider#convertSecret: Failed to convert Secret 'kaniko-secret' of type secretText due to secretText credential is missing the text
Started
Running in Durability level: PERFORMANCE_OPTIMIZED
  19.823 [id=34]	WARNING	i.f.k.c.i.VersionUsageUtils#alert: The client is using resource type 'customresourcedefinitions' with unstable version 'v1beta1'
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /tmp/jenkinsTests.tmp/jenkins7998527260074979318test/workspace/job
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
[Pipeline] }
[Pipeline] // stage
[Pipeline] withCredentials
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (CI Build and push snapshot)
Stage "CI Build and push snapshot" skipped due to when conditional
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Release)
[Pipeline] git
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/jlushington/evntxzweb.git # timeout=10
Fetching upstream changes from https://github.com/jlushington/evntxzweb.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/jlushington/evntxzweb.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 2eb3e602a0f34c9394cd50eda3e7fb198192cb49 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 2eb3e602a0f34c9394cd50eda3e7fb198192cb49
 > git branch -a -v --no-abbrev # timeout=10
 > git branch -D master # timeout=10
 > git checkout -b master 2eb3e602a0f34c9394cd50eda3e7fb198192cb49
Commit message: "base service update"
First time build. Skipping changelog.
[Pipeline] sh
+ jx-release-version
+ echo 0.0.3
[Pipeline] sh
+ cat VERSION
+ jx step tag --version 0.0.3
Tag v0.0.3 created and pushed to remote origin
[Pipeline] sh
+ npm install
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 1864 packages in 32.227s
[Pipeline] sh
+ CI=true DISPLAY=:99 npm test

> evntxz-web@0.1.0 test /tmp/jenkinsTests.tmp/jenkins7998527260074979318test/workspace/job
> react-scripts test --env=jsdom

PASS src/components/App.test.js
  ✓ renders without crashing (27ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.775s
Ran all test suites.
[Pipeline] sh
+ cat VERSION
+ export VERSION=0.0.3
+ skaffold build -f skaffold.yaml
time="2019-03-30T02:39:34Z" level=warning msg="config version (skaffold/v1beta2) out of date: upgrading to latest (skaffold/v1beta6)"
Generating Tag for [changeme]...
Starting build...
Building [changeme]...
Sending build context to Docker daemon  546.8kBSending build context to Docker daemon  2.142MBSending build context to Docker daemon  4.251MBSending build context to Docker daemon  9.052MBSending build context to Docker daemon  10.63MBSending build context to Docker daemon  13.82MBSending build context to Docker daemon  16.52MBSending build context to Docker daemon  17.57MBSending build context to Docker daemon  18.65MBSending build context to Docker daemon  20.78MBSending build context to Docker daemon  22.35MBSending build context to Docker daemon  29.32MBSending build context to Docker daemon  30.91MBSending build context to Docker daemon  32.49MBSending build context to Docker daemon  35.68MBSending build context to Docker daemon  36.73MBSending build context to Docker daemon  37.78MBSending build context to Docker daemon  38.83MBSending build context to Docker daemon  39.88MBSending build context to Docker daemon  43.11MBSending build context to Docker daemon  47.39MBSending build context to Docker daemon  52.73MBSending build context to Docker daemon  55.38MBSending build context to Docker daemon   59.1MBSending build context to Docker daemon  63.38MBSending build context to Docker daemon  66.58MBSending build context to Docker daemon  68.74MBSending build context to Docker daemon  69.27MBSending build context to Docker daemon  70.32MBSending build context to Docker daemon  71.37MBSending build context to Docker daemon  72.43MBSending build context to Docker daemon  76.69MBSending build context to Docker daemon  79.89MBSending build context to Docker daemon  83.09MBSending build context to Docker daemon  87.31MBSending build context to Docker daemon  89.97MBSending build context to Docker daemon  92.09MBSending build context to Docker daemon  93.69MBSending build context to Docker daemon  96.88MBSending build context to Docker daemon  101.2MBSending build context to Docker daemon  106.5MBSending build context to Docker daemon  113.5MBSending build context to Docker daemon  119.9MBSending build context to Docker daemon  127.4MBSending build context to Docker daemon    135MBSending build context to Docker daemon  141.4MBSending build context to Docker daemon  146.2MBSending build context to Docker daemon  152.1MBSending build context to Docker daemon  159.1MBSending build context to Docker daemon    165MBSending build context to Docker daemon  171.4MBSending build context to Docker daemon  176.2MBSending build context to Docker daemon    179MBSending build context to Docker daemon  180.6MBSending build context to Docker daemon    187MBSending build context to Docker daemon  191.3MBSending build context to Docker daemon  197.7MBSending build context to Docker daemon    202MBSending build context to Docker daemon  203.1MBSending build context to Docker daemon  206.8MBSending build context to Docker daemon  210.6MBSending build context to Docker daemon  211.7MBSending build context to Docker daemon  214.9MBSending build context to Docker daemon    217MBSending build context to Docker daemon  218.1MBSending build context to Docker daemon  220.8MBSending build context to Docker daemon  221.8MBSending build context to Docker daemon  222.9MBSending build context to Docker daemon  224.4MBSending build context to Docker daemon  227.1MBSending build context to Docker daemon  230.3MBSending build context to Docker daemon  234.6MBSending build context to Docker daemon  238.4MBSending build context to Docker daemon  242.7MBSending build context to Docker daemon  245.9MBSending build context to Docker daemon    248MBSending build context to Docker daemon  249.6MBSending build context to Docker daemon  252.1MB
Step 1/6 : FROM node:9-slim
 ---> e20bb4abe4ee
Step 2/6 : ENV PORT 8080
 ---> Using cache
 ---> 3a3bbdf636c0
Step 3/6 : EXPOSE 8080
 ---> Using cache
 ---> 23556e921702
Step 4/6 : WORKDIR /usr/src/app
 ---> Using cache
 ---> efbd2399e65e
Step 5/6 : COPY . .
 ---> 8b6d83ab7ce5
Step 6/6 : CMD npm start
 ---> Running in 92211302fc63
 ---> d45111224b9a
Successfully built d45111224b9a
The push refers to a repository [10.39.253.125:5000/jlushington/evntxzweb]
e869449cc262: Preparing
9b5637327bc0: Preparing
e16c226cf2a8: Preparing
7fd597d009e4: Preparing
7c6ab5fb7059: Preparing
ed271eac23e9: Preparing
156ff16f37e4: Preparing
156ff16f37e4: Waiting
ed271eac23e9: Waiting
7c6ab5fb7059: Layer already exists
e16c226cf2a8: Layer already exists
7fd597d009e4: Layer already exists
9b5637327bc0: Layer already exists
156ff16f37e4: Layer already exists
ed271eac23e9: Layer already exists
e869449cc262: Pushed
0.0.3: digest: sha256:a0168e72845a00ad08c78509ac44887af6933abc12fd4a8bc50d0c8fd9659aad size: 1789
Build complete in 1m0.128599308s
Starting test...
Test complete in 7.62µs
changeme -> 10.39.253.125:5000/jlushington/evntxzweb:0.0.3@sha256:a0168e72845a00ad08c78509ac44887af6933abc12fd4a8bc50d0c8fd9659aad
There is a new version (0.26.0) of Skaffold available. Download it at https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64

[Pipeline] sh
+ cat VERSION
+ jx step post build --image 10.39.253.125:5000/jlushington/evntxzweb:0.0.3
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Promote to Environments)
[Pipeline] dir
Running in /tmp/jenkinsTests.tmp/jenkins7998527260074979318test/workspace/job/charts/evntxzweb
[Pipeline] {
[Pipeline] sh
+ cat ../../VERSION
+ jx step changelog --batch-mode --version v0.0.3
Converted /tmp/jenkinsTests.tmp/jenkins7998527260074979318test/workspace/job/charts/evntxzweb to an unshallow repository
Generating change log from git ref 2eb3e602a0f34c9394cd50eda3e7fb198192cb49 => fdf3cef19982fadb0db81fb4da245b0eb3af0c5b
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Finding issues in commit messages using git format
No release found for jlushington/evntxzweb and tag v0.0.3 so creating a new release
Updated the release information at https://github.com/jlushington/evntxzweb/releases/tag/v0.0.3
generated: /tmp/jenkinsTests.tmp/jenkins7998527260074979318test/workspace/job/charts/evntxzweb/templates/release.yaml
Created Release evntxzweb-0-0-3 resource in namespace jx
Updating PipelineActivity jlushington-evntxzweb-master-3 with version 0.0.3
Updated PipelineActivities jlushington-evntxzweb-master-3 with release notes URL: https://github.com/jlushington/evntxzweb/releases/tag/v0.0.3
[Pipeline] sh
+ jx step helm release
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: jenkins-x http://chartmuseum.jenkins-x.io
Successfully added Helm repository jenkins-x.
Adding missing Helm repo: releases http://jenkins-x-chartmuseum:8080
Successfully added Helm repository releases.
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Uploading chart file evntxzweb-0.0.3.tgz to http://jenkins-x-chartmuseum:8080/api/charts
Received 201 response: {"saved":true}
[Pipeline] sh
+ cat ../../VERSION
+ jx promote -b --all-auto --timeout 1h --version 0.0.3
prow based install so skip waiting for the merge of Pull Requests to go green as currently there is an issue with gettingstatuses from the PR, see https://github.com/jenkins-x/jx/issues/2410
Promoting app evntxzweb version 0.0.3 to namespace jx-staging
Created Pull Request: https://github.com/jlushington/environment-evntxz-staging/pull/11

Pull Request https://github.com/jlushington/environment-evntxz-staging/pull/11 is merged at sha d81bd08d5b341989c2c54ef053d6647806dc7cbe
Pull Request merged but we are not waiting for the update pipeline to complete!
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
